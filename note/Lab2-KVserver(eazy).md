---
title: Lab2-KVserver(eazy)
date created: 2024-07-05T14:22:56.5656+08:00
date modified: 2024-12-05T01:27:49.4949+08:00
---

## Time Spend

1.5h + 1h = 2.5h

1. 1.5h to finish a and b but meet memory use more problem
2. 1h to reduce memory use

## Memory Problem

### Restrain

- put client: 200kB
- get client: 10kB
- append client: 3000kB

### Why?

MUST divide write operation and read operation and hold different state, which mean that do not need to store the state for reading and writing.

## Design

### Clerk

~~~go
uid    int64
worder int64 // write request order
~~~

1. only write to remote operation add order
2. uid generated by nrand() use to identify

### Server

~~~go
clientWOrder       map[int64]int64
clientAppendReturn map[int64]string
~~~

1. WOrder as same as clerk
2. only append need to return before value

### CheckOrder

1. just happen when meet write operation
2. clean the AppendReturn when order update return true

### RPC Structure

You Know How

## PASS

![](attachments/Lab2-KVserver(eazy).png)
